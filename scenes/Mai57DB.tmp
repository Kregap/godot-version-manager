[gd_scene load_steps=20 format=3 uid="uid://nrevo2o6wdal"]

[ext_resource type="Script" path="res://scenes/OpenFolder.gd" id="1"]
[ext_resource type="Script" path="res://scenes/Add.gd" id="2"]
[ext_resource type="Script" path="res://scenes/VersionSelect.gd" id="3"]
[ext_resource type="Script" path="res://scenes/Version.gd" id="4"]
[ext_resource type="Texture2D" path="res://icons/alpha.res" id="5"]
[ext_resource type="Script" path="res://scenes/AddNew.gd" id="6"]
[ext_resource type="Texture2D" uid="uid://bt5vbehjyrvad" path="res://icons/paypal_donate.png" id="7"]
[ext_resource type="Texture2D" uid="uid://clfak0mhlgsr8" path="res://icons/paypal_donate_hover.png" id="8"]
[ext_resource type="Script" path="res://scenes/Installed.gd" id="9"]
[ext_resource type="Script" path="res://scenes/Donate.gd" id="10"]
[ext_resource type="Theme" path="res://theme/main.theme" id="11"]
[ext_resource type="StyleBox" path="res://theme/round_and_shaded.stylebox" id="12"]
[ext_resource type="Script" path="res://scenes/NewsFeed.gd" id="13"]
[ext_resource type="Texture2D" uid="uid://cmxldkx7a5rrn" path="res://icon.png" id="14"]
[ext_resource type="Script" path="res://scenes/UIScale.gd" id="15"]

[sub_resource type="StyleBoxFlat" id="3055"]
bg_color = Color(0.815686, 0.815686, 0.815686, 1)
corner_radius_top_left = 2
corner_radius_top_right = 2
corner_radius_bottom_right = 2
corner_radius_bottom_left = 2

[sub_resource type="StyleBoxEmpty" id="3054"]

[sub_resource type="StyleBoxEmpty" id="3052"]

[sub_resource type="StyleBoxEmpty" id="3053"]

[node name="Main" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 1.0
offset_bottom = 1.0
theme = ExtResource("11")

[node name="Panel" type="Panel" parent="."]
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0

[node name="MarginContainer" type="MarginContainer" parent="."]
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0
theme_override_constants/margin_left = 20
theme_override_constants/margin_top = 20
theme_override_constants/margin_right = 20
theme_override_constants/margin_bottom = 20

[node name="HBox" type="HBoxContainer" parent="MarginContainer"]
layout_mode = 2
theme_override_constants/separation = 10

[node name="MenuBar" type="VBoxContainer" parent="MarginContainer/HBox"]
custom_minimum_size = Vector2(300, 50)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
size_flags_stretch_ratio = 0.5
theme_override_constants/separation = 10

[node name="Include" type="HBoxContainer" parent="MarginContainer/HBox/MenuBar"]
layout_mode = 2
tooltip_text = "Select type of version to include"

[node name="Stable" type="CheckBox" parent="MarginContainer/HBox/MenuBar/Include"]
layout_mode = 2
text = "Stable"

[node name="Alpha" type="CheckBox" parent="MarginContainer/HBox/MenuBar/Include"]
layout_mode = 2
text = "Alpha"

[node name="Beta" type="CheckBox" parent="MarginContainer/HBox/MenuBar/Include"]
layout_mode = 2
text = "Beta"

[node name="RC" type="CheckBox" parent="MarginContainer/HBox/MenuBar/Include"]
layout_mode = 2
text = "RC"

[node name="Dev" type="CheckBox" parent="MarginContainer/HBox/MenuBar/Include"]
layout_mode = 2
text = "Dev"

[node name="Mono" type="CheckBox" parent="MarginContainer/HBox/MenuBar/Include"]
layout_mode = 2
text = "Mono"

[node name="Version&Refresh" type="HBoxContainer" parent="MarginContainer/HBox/MenuBar"]
custom_minimum_size = Vector2(0, 50)
layout_mode = 2

[node name="VersionSelect" type="OptionButton" parent="MarginContainer/HBox/MenuBar/Version&Refresh"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
tooltip_text = "Select a Godot version to download"
script = ExtResource("3")
refresh_button_path = NodePath("../Refresh")
download_button_path = NodePath("../../Download")
stable_button_path = NodePath("../../Include/Stable")
alpha_button_path = NodePath("../../Include/Alpha")
beta_button_path = NodePath("../../Include/Beta")
rc_button_path = NodePath("../../Include/RC")
dev_button_path = NodePath("../../Include/Dev")
mono_button_path = NodePath("../../Include/Mono")

[node name="autoupdate" type="Timer" parent="MarginContainer/HBox/MenuBar/Version&Refresh/VersionSelect"]
wait_time = 300.0
one_shot = true

[node name="Refresh" type="Button" parent="MarginContainer/HBox/MenuBar/Version&Refresh"]
custom_minimum_size = Vector2(100, 0)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
size_flags_stretch_ratio = 0.01
tooltip_text = "Refreshes the database to show new available versions.
Hold SHIFT for full refresh if you think anything is missing.
"
text = "Refresh"

[node name="Download" type="Button" parent="MarginContainer/HBox/MenuBar"]
custom_minimum_size = Vector2(0, 60)
layout_mode = 2
size_flags_horizontal = 3
tooltip_text = "Download the selected version"
text = "Download"

[node name="Add" type="Button" parent="MarginContainer/HBox/MenuBar"]
custom_minimum_size = Vector2(0, 50)
layout_mode = 2
size_flags_horizontal = 3
tooltip_text = "Add a custom version or another tool from an .exe"
text = "Add version/project from file.."
script = ExtResource("2")
add_popup = NodePath("../../../../AddNew")

[node name="Donate" type="TextureButton" parent="MarginContainer/HBox/MenuBar"]
visible = false
custom_minimum_size = Vector2(0, 20)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
texture_normal = ExtResource("7")
texture_hover = ExtResource("8")
stretch_mode = 3
script = ExtResource("10")

[node name="OpenFolder" type="Button" parent="MarginContainer/HBox/MenuBar"]
layout_mode = 2
size_flags_horizontal = 3
tooltip_text = "Add a custom version or another tool from an .exe"
text = "Open Download Folder"
script = ExtResource("1")

[node name="UIScale" type="HBoxContainer" parent="MarginContainer/HBox/MenuBar"]
layout_mode = 2
script = ExtResource("15")

[node name="Label" type="Label" parent="MarginContainer/HBox/MenuBar/UIScale"]
layout_mode = 2
text = "UI SCALE:"

[node name="SpinBox" type="SpinBox" parent="MarginContainer/HBox/MenuBar/UIScale"]
layout_mode = 2
max_value = 3.0
step = 0.1

[node name="LogoContainer" type="MarginContainer" parent="MarginContainer/HBox/MenuBar"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
tooltip_text = "Click to go to releases webpage"
theme_override_constants/margin_left = 35
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 35
theme_override_constants/margin_bottom = 10

[node name="Panel" type="PanelContainer" parent="MarginContainer/HBox/MenuBar/LogoContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
mouse_filter = 2
theme_override_styles/panel = SubResource("3055")

[node name="HBox" type="VBoxContainer" parent="MarginContainer/HBox/MenuBar/LogoContainer/Panel"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
mouse_filter = 2

[node name="Name" type="Label" parent="MarginContainer/HBox/MenuBar/LogoContainer/Panel/HBox"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 6
text = "Godot Version Manager"
horizontal_alignment = 1

[node name="Logo" type="TextureRect" parent="MarginContainer/HBox/MenuBar/LogoContainer/Panel/HBox"]
custom_minimum_size = Vector2(0, 100)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
mouse_filter = 2
texture = ExtResource("14")
expand_mode = 1
stretch_mode = 6

[node name="Copyright" type="Label" parent="MarginContainer/HBox/MenuBar/LogoContainer/Panel/HBox"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 6
text = "Copyright Â©2022
Lisandro Lorea and Contributors"
horizontal_alignment = 1

[node name="Version" type="HBoxContainer" parent="MarginContainer/HBox/MenuBar"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
script = ExtResource("4")

[node name="tag" type="Label" parent="MarginContainer/HBox/MenuBar/Version"]
layout_mode = 2
text = "Version Tag: vX.XX"

[node name="update" type="Button" parent="MarginContainer/HBox/MenuBar/Version"]
layout_mode = 2
text = "Update"

[node name="req" type="HTTPRequest" parent="MarginContainer/HBox/MenuBar/Version"]

[node name="Installed" type="ItemList" parent="MarginContainer/HBox"]
unique_name_in_owner = true
custom_minimum_size = Vector2(320, 0)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/h_separation = 10
theme_override_constants/v_separation = 10
theme_override_constants/icon_margin = 10
theme_override_constants/line_separation = 10
allow_rmb_select = true
item_count = 1
fixed_icon_size = Vector2i(64, 64)
item_0/text = "Item 0"
item_0/icon = ExtResource("5")
script = ExtResource("9")
context_menu = NodePath("ContextMenu")

[node name="ContextMenu" type="PopupMenu" parent="MarginContainer/HBox/Installed"]
item_count = 4
item_0/text = "Edit"
item_0/id = 0
item_1/text = "Move Up"
item_1/id = 1
item_2/text = "Move Down"
item_2/id = 2
item_3/text = "Delete"
item_3/id = 3

[node name="CloseOnLaunch" type="CheckButton" parent="MarginContainer/HBox/Installed"]
unique_name_in_owner = true
layout_mode = 0
anchor_left = 1.0
anchor_right = 1.0
offset_left = -128.0
offset_bottom = 25.0
grow_horizontal = 0
theme_override_colors/font_pressed_color = Color(0.27451, 0.54902, 0.74902, 1)
theme_override_styles/focus = SubResource("3054")
text = "Close on launch"

[node name="Scroll" type="ScrollContainer" parent="MarginContainer/HBox"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource("13")

[node name="Feed" type="VBoxContainer" parent="MarginContainer/HBox/Scroll"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/separation = 20

[node name="Title" type="Label" parent="MarginContainer/HBox/Scroll/Feed"]
layout_mode = 2
text = "godotengine.org news feed"
horizontal_alignment = 1
uppercase = true

[node name="Loading" type="RichTextLabel" parent="MarginContainer/HBox/Scroll/Feed"]
visible = false
clip_contents = false
custom_minimum_size = Vector2(0, 20)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_styles/focus = SubResource("3052")
theme_override_styles/normal = SubResource("3053")
bbcode_enabled = true
text = "updating..."

[node name="req" type="HTTPRequest" parent="MarginContainer/HBox/Scroll"]

[node name="ModalBlur" type="ColorRect" parent="."]
visible = false
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
color = Color(0.126, 0.149433, 0.2, 0.784314)

[node name="AddNew" type="Popup" parent="."]
unique_name_in_owner = true
initial_position = 4
size = Vector2i(560, 223)
visible = true
exclusive = true
script = ExtResource("6")
select_dialog = NodePath("../SelectPath")
modal_blur = NodePath("../ModalBlur")

[node name="Panel" type="Panel" parent="AddNew"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_styles/panel = ExtResource("12")

[node name="Margin" type="MarginContainer" parent="AddNew"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
theme_override_constants/margin_left = 20
theme_override_constants/margin_top = 20
theme_override_constants/margin_right = 20
theme_override_constants/margin_bottom = 20

[node name="VBox" type="VBoxContainer" parent="AddNew/Margin"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Title" type="Label" parent="AddNew/Margin/VBox"]
layout_mode = 2
text = "Add new version or project.."
horizontal_alignment = 1

[node name="path" type="HBoxContainer" parent="AddNew/Margin/VBox"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Label" type="Label" parent="AddNew/Margin/VBox/path"]
layout_mode = 2
size_flags_horizontal = 3
text = "Path3D"

[node name="LineEdit" type="LineEdit" parent="AddNew/Margin/VBox/path"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 4.0

[node name="AddVersionSelect" type="MenuButton" parent="AddNew/Margin/VBox/path"]
unique_name_in_owner = true
layout_mode = 2
text = "[Select]"

[node name="Select" type="Button" parent="AddNew/Margin/VBox/path"]
layout_mode = 2
text = "Load.."

[node name="name" type="HBoxContainer" parent="AddNew/Margin/VBox"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Label" type="Label" parent="AddNew/Margin/VBox/name"]
layout_mode = 2
size_flags_horizontal = 3
text = "Name"

[node name="LineEdit" type="LineEdit" parent="AddNew/Margin/VBox/name"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 4.0

[node name="arguments" type="HBoxContainer" parent="AddNew/Margin/VBox"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Label" type="Label" parent="AddNew/Margin/VBox/arguments"]
layout_mode = 2
size_flags_horizontal = 3
text = "Arguments"

[node name="LineEdit" type="LineEdit" parent="AddNew/Margin/VBox/arguments"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 4.0

[node name="Tip" type="Label" parent="AddNew/Margin/VBox"]
layout_mode = 2
theme_override_colors/font_color = Color(0.921569, 0.921569, 0.921569, 1)
text = "Tip: to launch a project directly add to arguments: --path \"path/to/project_folder\""

[node name="Add" type="Button" parent="AddNew/Margin/VBox"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
text = "Add"

[node name="Close" type="Button" parent="AddNew"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -25.0
offset_bottom = 25.0
tooltip_text = "Close	"
text = "X"

[node name="SelectPath" type="FileDialog" parent="."]
access = 2
filters = PackedStringArray("*.exe ; Windows executable", "*.app ; OSX Application", "*.64,*.x86_64 ; Linux executable")

[connection signal="toggled" from="MarginContainer/HBox/MenuBar/Include/Stable" to="MarginContainer/HBox/MenuBar/Version&Refresh/VersionSelect" method="_on_Stable_toggled"]
[connection signal="toggled" from="MarginContainer/HBox/MenuBar/Include/Alpha" to="MarginContainer/HBox/MenuBar/Version&Refresh/VersionSelect" method="_on_Alpha_toggled"]
[connection signal="toggled" from="MarginContainer/HBox/MenuBar/Include/Beta" to="MarginContainer/HBox/MenuBar/Version&Refresh/VersionSelect" method="_on_Beta_toggled"]
[connection signal="toggled" from="MarginContainer/HBox/MenuBar/Include/RC" to="MarginContainer/HBox/MenuBar/Version&Refresh/VersionSelect" method="_on_RC_toggled"]
[connection signal="toggled" from="MarginContainer/HBox/MenuBar/Include/Dev" to="MarginContainer/HBox/MenuBar/Version&Refresh/VersionSelect" method="_on_Dev_toggled"]
[connection signal="toggled" from="MarginContainer/HBox/MenuBar/Include/Mono" to="MarginContainer/HBox/MenuBar/Version&Refresh/VersionSelect" method="_on_Mono_toggled"]
[connection signal="refresh_finished" from="MarginContainer/HBox/MenuBar/Version&Refresh/VersionSelect" to="MarginContainer/HBox/MenuBar/Version&Refresh/VersionSelect" method="_on_VersionSelect_refresh_finished"]
[connection signal="version_added" from="MarginContainer/HBox/MenuBar/Version&Refresh/VersionSelect" to="MarginContainer/HBox/Installed" method="_on_version_added"]
[connection signal="timeout" from="MarginContainer/HBox/MenuBar/Version&Refresh/VersionSelect/autoupdate" to="MarginContainer/HBox/MenuBar/Version&Refresh/VersionSelect" method="_on_autoupdate_timeout"]
[connection signal="pressed" from="MarginContainer/HBox/MenuBar/Version&Refresh/Refresh" to="MarginContainer/HBox/MenuBar/Version&Refresh/VersionSelect" method="_on_Refresh_pressed"]
[connection signal="pressed" from="MarginContainer/HBox/MenuBar/Download" to="MarginContainer/HBox/MenuBar/Version&Refresh/VersionSelect" method="_on_Download_pressed"]
[connection signal="pressed" from="MarginContainer/HBox/MenuBar/Add" to="MarginContainer/HBox/MenuBar/Add" method="_on_Add_pressed"]
[connection signal="pressed" from="MarginContainer/HBox/MenuBar/Donate" to="MarginContainer/HBox/MenuBar/Donate" method="_on_Donate_pressed"]
[connection signal="pressed" from="MarginContainer/HBox/MenuBar/OpenFolder" to="MarginContainer/HBox/MenuBar/OpenFolder" method="_on_OpenFolder_pressed"]
[connection signal="value_changed" from="MarginContainer/HBox/MenuBar/UIScale/SpinBox" to="MarginContainer/HBox/MenuBar/UIScale" method="_on_SpinBox_value_changed"]
[connection signal="gui_input" from="MarginContainer/HBox/MenuBar/LogoContainer" to="MarginContainer/HBox/MenuBar/Version" method="_on_LogoContainer_gui_input"]
[connection signal="pressed" from="MarginContainer/HBox/MenuBar/Version/update" to="MarginContainer/HBox/MenuBar/Version" method="_on_update_pressed"]
[connection signal="request_completed" from="MarginContainer/HBox/MenuBar/Version/req" to="MarginContainer/HBox/MenuBar/Version" method="_on_request_completed"]
[connection signal="item_activated" from="MarginContainer/HBox/Installed" to="MarginContainer/HBox/Installed" method="_on_Installed_item_activated"]
[connection signal="id_pressed" from="MarginContainer/HBox/Installed/ContextMenu" to="MarginContainer/HBox/Installed" method="_on_ContextMenu_id_pressed"]
[connection signal="toggled" from="MarginContainer/HBox/Installed/CloseOnLaunch" to="MarginContainer/HBox/Installed" method="_on_CloseOnLaunch_toggled"]
[connection signal="about_to_popup" from="AddNew" to="AddNew" method="_on_AddNew_about_to_show"]
[connection signal="popup_hide" from="AddNew" to="AddNew" method="_on_AddNew_popup_hide"]
[connection signal="version_added" from="AddNew" to="MarginContainer/HBox/Installed" method="_on_version_added"]
[connection signal="text_changed" from="AddNew/Margin/VBox/path/LineEdit" to="AddNew" method="_validate"]
[connection signal="text_submitted" from="AddNew/Margin/VBox/path/LineEdit" to="AddNew" method="_validate"]
[connection signal="pressed" from="AddNew/Margin/VBox/path/Select" to="AddNew" method="_on_Select_pressed"]
[connection signal="text_changed" from="AddNew/Margin/VBox/name/LineEdit" to="AddNew" method="_validate"]
[connection signal="text_submitted" from="AddNew/Margin/VBox/name/LineEdit" to="AddNew" method="_validate"]
[connection signal="text_changed" from="AddNew/Margin/VBox/arguments/LineEdit" to="AddNew" method="_validate"]
[connection signal="text_submitted" from="AddNew/Margin/VBox/arguments/LineEdit" to="AddNew" method="_validate"]
[connection signal="pressed" from="AddNew/Margin/VBox/Add" to="AddNew" method="_on_Add_pressed"]
[connection signal="pressed" from="AddNew/Close" to="AddNew" method="_on_Close_pressed"]
